<!-- Grid filter -->
<div class="container">
  <div class="form-inline has-feedback filter-header">
    <div class="row">
      <div class="col-xs-5">
        <input type="text" class="form-control" placeholder="Search" ng-model="search.$" />
        <button class="btn btn-default btn-sm" ng-click="hideFilter=!hideFilter">Advanced Search</button>
      </div>
      <div ng-include src="'/public/mods/visits/partials/sortSearch.html'"></div>
    </div>

    <a href ng-click="eventDateFilter('all')">All</a>&nbsp;&nbsp;
    <a href ng-click="eventDateFilter('today')">Today</a>&nbsp;&nbsp;
    <a href ng-click="eventDateFilter('pastMonth')">Past Month</a>&nbsp;&nbsp;
    <a href ng-click="eventDateFilter('thisMonth')">This Month</a>&nbsp;&nbsp;
    <a href ng-click="eventDateFilter('future')">Next Month</a>&nbsp;&nbsp;

    <table class="table table-striped table-condensed table-responsive table-hover">
      <thead class="data-grid-header">
        <!-- table header -->
        <tr>
          <th class="hidden-xs">
            <span class="fa fa-calendar"></span>&nbsp;&nbsp;
            <a href="" ng-click="orderByField='agenda'; reverseSort = !reverseSort">Schedule Date</a>
          </th>        
          <th>
            <span class="fa fa-th-large"></span>&nbsp;&nbsp;
            <a href="" ng-click="orderByField='title'; reverseSort = !reverseSort">Title</a>
          </th>
          <th>
            <span class="fa fa-user-secret"></span>&nbsp;&nbsp;
            <a href="" ng-click="orderByField='client'; reverseSort = !reverseSort">Client Name</a>
          </th>
          <th class="hidden-xs">
            <span class="fa fa-globe"></span>&nbsp;&nbsp;
            <a href="" ng-click="orderByField='location'; reverseSort = !reverseSort">Locations</a>
          </th>
          <th></th>
        </tr>

        <!-- table filter -->
        <tr ng-hide="hideFilter">
          <th><span ng-hide="hideFilter"></span></th>
          <th><span ng-hide="hideFilter"><input type="text" ng-model="search.title"></span></th>
          <th><span ng-hide="hideFilter"><input type="text" ng-model="search.client"></span></th>
          <th><span ng-hide="hideFilter"><input type="text" ng-model="search.locations"></span></th>
          <th></th>
        </tr>

      </thead>
      <!--before sorting table-->
      <tbody class="data-grid-data">
        <tr ng-repeat="visit in visitsList | filter: search |orderBy:orderByField:reverseSort" ng-if="showAll" >
          <td>{{visit.startDate | DateFormat:"ddd, DD MMM"}} - {{visit.endDate | DateFormat:"ddd, DD MMM"}}</td>
          <td>{{visit.title}}</td>
          <td><div clientdisplay view-mode="clientnameonly" client-id="visit.client"></div></td>
          <td>{{visit.locations}}</td>
          <td>
           <a class="table-btn" href="#/visits/{{visit._id}}/show"><span class="fa fa-eye fa-lg" /></a>
           <a class="table-btn" href="#/visits/{{visit._id}}/edit"><span class="fa fa-edit fa-lg" /></a>
           <a class="table-btn" ng-click="delete(visit)" confirm-dialog header-text="Delete Visit" content="Are you sure you want to delete the visit with visit title <b>{{visit.title}} ? </b>"
            yes-text="Ok" no-text="Cancel"><span class="fa fa-trash fa-lg" /></a>
            <a class="table-btn" href="#/visits/{{visit._id}}/sessions"><span class="fa fa-calendar fa-lg" /></a>
          </td>
        </tr>
        <!--sorted date table-->
        <tr ng-repeat="visit in filteredDate | filter: search | orderBy:orderByField:reverseSort" ng-if="showFiltered" >
          <td>{{visit.startDate | DateFormat:"ddd, DD MMM"}} - {{visit.endDate | DateFormat:"ddd, DD MMM"}}</td>
          <td>{{visit.title}}</td>
          <td><div clientdisplay view-mode="clientnameonly" client-id="visit.client"></div></td>
          <td>{{visit.locations}}</td>
          <td>
           <a class="table-btn" href="#/visits/{{visit._id}}/show"><span class="fa fa-eye fa-lg" /></a>
           <a class="table-btn" href="#/visits/{{visit._id}}/edit"><span class="fa fa-edit fa-lg" /></a>
           <a class="table-btn" ng-click="delete(visit)" confirm-dialog header-text="Delete Visit" content="Are you sure you want to delete the visit with visit title <b>{{visit.title}} ? </b>"
             yes-text="Ok" no-text="Cancel"><span class="fa fa-trash fa-lg" /></a>
             <a class="table-btn" href="#/visits/{{visit._id}}/sessions"><span class="fa fa-calendar fa-lg" /></a>
           </td>
         </tr>
       </tbody>
       <tfoot>
        <tr>
          <td></td><td></td><td>&nbsp;&nbsp;visits grid view</td><td></td><td></td></tr>
        </tfoot>
      </table>
    </div>  
  </div>    
